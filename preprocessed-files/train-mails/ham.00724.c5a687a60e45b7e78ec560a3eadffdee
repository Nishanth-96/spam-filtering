on sun , number jul number number : number : number -number hal devor wrote : > > > > > > on fri , number jul number , `` j '' == j c lawrenc wrote : j > what would be great is if i could build the relev comp file j > dynam at runtim . > sure . use the `` folder chang '' hook . creat a proc name > hook_folderchangesometh ( where `` someth '' is meaning and like > to be uniqu in the univers just in case you distribut thi to > other ) . put the proc in a file in your ~/.tk/exmh directori , > regener the tclindex , restart exmh . > in that proc you can do anyth you want , like rewrit your > ~/mail/comp file . yeah , that would work , tho there are race condit and likely/poss ugli side effect ( eg unintent left-ov comp file ) . i 've end up take a veri differ rout : tmda ( httpaddr in particular i use tmda outbound filter to add custom plu address to the messag i send to specif list . for exampl , for the tmda-us list i want a from : address of emailaddr so the relev outbound filter is : to emailaddr ext=tmda which rewrit my from : header transpar . when i get next month' batch of password remind from mailman list i 'll be run about resubscrib to each list either with a standard plu address or a tmda-bas sender address ( ie an address which onli the list in question is abl to send mail to ) . -+- get tmda fulli happi with nmh wa a minor pain . reason : nmh , like mh , by default deliv outbound mail via smtp to port number on a defin host . the port number can not be configur ( it call getservbynam ( ) which doe a lookup against `` smtp '' in /etc/servic ) . ergo , you are constrain to use tell nmh to use tmda-sendmail instead of smtp . use sendmail as the deliveri method under mh instead of smtp is not recommend as is lose a number of use bit of robust in mail deliveri failur mode . further , when nmh is configur to use sendmail instead of smtp nmh 's whom tool call sendmail as follow : ... /sendmail/ -m -t -i -bv which creat problem : postfix doe not support `` -bv '' and return in error exim doe not support `` -t '' with `` -bv '' and return in error do n't mention qmail . i wo n't use it . `` whom '' is far too use as a compon tool in mh to lose . it would be nice if someon gave the new crew work on nmh a shout about thi . the `` -bv '' option to sendmail is pretti damn close to be allman sendmail specif and thu unfriendli to other mta . further there are mani case where it would be use to configur a non-standard port to deliv outbound mail to via smtp . nmh' current insist on onli use port number ( or as specifi in /etc/servic ) is a pain . i 've work out a hack to use tmda with exim while retain nmh' '' whom '' support use exim 's system filter : number ) make sure that the follow option are set in ~/.tmda/config : datadir allow_mode_numb crypt_key_fil fingerprint number ) chgrp everyth in and under ~/.tmda to group `` mail '' . number ) configur exim as per the current tmda how-to . number ) set the follow option in exim.conf : message_filt = `` /etc/exim/filt '' message_filter_pipe_transport = address_pip number ) /etc/exim/filt read : # exim filter testprint `` local_part : dollar { local_part : dollarh_from : } '' testprint `` domain : dollar { domain : dollarh_from : } '' if `` dollarh_x-tmda-fingerprint : '' is `` '' and `` dollar { domain : dollarh_from : } '' is `` kanga.nu '' and `` dollar { if exist { /home/dollar { local_part : dollarh_from : } /.tmda } { true } { fals } } '' is `` true '' then pipe `` /usr/bin/tmda-inject -c /home/dollar { local_part : dollarh_from : } /.tmda/config '' finish endif ye , that assum that all user directori are under /home and that they use ~/.tmda/config instead of ~/.tmdarc . hack appropri for your setup . basic explan : exim send all outbound mail thru the system filter ( if one is configur ) befor attempt deliveri . the abov system filter extract the user from the from : address and pipe the messag thru that user 's tmda setup via tmda-inject . the system filter run as the same user as exim , thu the requir for the chgrp mail . if your exim instal run as a differ user , chgrp as appropri . it should be fairli easi to do someth similar under postfix , but i have n't investig that end . note : thi requir that all outbound mail that is to be process with tmda ha a from : header which refer a local user ( suffix are fine ) , and that the from : address is fulli qualifi with a known domain . if you 're vhost the abov setup would be fairli trivial to extend for other domain and dollarhom path . i 'm not vhost on my desktop and so do n't care . you could also qualifi on envelop or other header if you wish . a nice side effect of thi approach for those run share mail server is that all user who have tmda config instantli get tmda support for their outbound mail -- and in a manner that is less complex and less prone to end-us error than the typic tmda configur . caveat emptor . obnot : i 've also written a small patch against tmda number.numb to add a `` hold '' deliveri method ( ident to `` confirm '' except it send no confirm request -- veri use for test config or do silent sidetrack of mail ) . -- j c lawrenc -- -- -- -- - ( * ) satan , oscil my metal sonata . emailaddr he live as a devil , eh ? httpaddr evil is a name of a foeman , as i live . _______________________________________________ exmh-us mail list emailaddr httpaddr